"use strict";(self.webpackChunkscube_v4=self.webpackChunkscube_v4||[]).push([[562],{55860:(e,t,a)=>{a.d(t,{A:()=>k});var i=a(98587),n=a(58168),r=a(96540),s=a(34164),o=a(75659),l=a(28466),c=a(11848),d=a(39770),u=a(41381),h=a(79716),p=a(33166),m=a(38413),v=a(31609);function f(e){return(0,v.Ay)("PrivateSwitchBase",e)}(0,m.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var g=a(74848);const w=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],b=(0,c.Ay)(p.A)((({ownerState:e})=>(0,n.A)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12}))),x=(0,c.Ay)("input",{shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),k=r.forwardRef((function(e,t){const{autoFocus:a,checked:r,checkedIcon:c,className:d,defaultChecked:p,disabled:m,disableFocusRipple:v=!1,edge:k=!1,icon:y,id:S,inputProps:C,inputRef:A,name:j,onBlur:N,onChange:R,onFocus:$,readOnly:B,required:O=!1,tabIndex:z,type:M,value:F}=e,I=(0,i.A)(e,w),[D,_]=(0,u.A)({controlled:r,default:Boolean(p),name:"SwitchBase",state:"checked"}),P=(0,h.A)();let E=m;P&&void 0===E&&(E=P.disabled);const T="checkbox"===M||"radio"===M,X=(0,n.A)({},e,{checked:D,disabled:E,disableFocusRipple:v,edge:k}),L=(e=>{const{classes:t,checked:a,disabled:i,edge:n}=e,r={root:["root",a&&"checked",i&&"disabled",n&&`edge${(0,l.A)(n)}`],input:["input"]};return(0,o.A)(r,f,t)})(X);return(0,g.jsxs)(b,(0,n.A)({component:"span",className:(0,s.A)(L.root,d),centerRipple:!0,focusRipple:!v,disabled:E,tabIndex:null,role:void 0,onFocus:e=>{$&&$(e),P&&P.onFocus&&P.onFocus(e)},onBlur:e=>{N&&N(e),P&&P.onBlur&&P.onBlur(e)},ownerState:X,ref:t},I,{children:[(0,g.jsx)(x,(0,n.A)({autoFocus:a,checked:r,defaultChecked:p,className:L.input,disabled:E,id:T?S:void 0,name:j,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;_(t),R&&R(e,t)},readOnly:B,ref:A,required:O,ownerState:X,tabIndex:z,type:M},"checkbox"===M&&void 0===F?{}:{value:F},C)),D?c:y]}))}))},4562:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var i=a(74848),n=a(96540),r=a(2198),s=(a(50513),a(65048),a(11848)),o=a(98587),l=a(58168),c=a(34164),d=a(75659),u=a(771),h=a(28466),p=a(55860),m=a(15607),v=a(38413),f=a(31609);function g(e){return(0,f.Ay)("MuiSwitch",e)}const w=(0,v.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),b=["className","color","edge","size","sx"],x=(0,s.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t[`edge${(0,h.A)(a.edge)}`],t[`size${(0,h.A)(a.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${w.thumb}`]:{width:16,height:16},[`& .${w.switchBase}`]:{padding:4,[`&.${w.checked}`]:{transform:"translateX(16px)"}}}}]}),k=(0,s.Ay)(p.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{[`& .${w.input}`]:t.input},"default"!==a.color&&t[`color${(0,h.A)(a.color)}`]]}})((({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${"light"===e.palette.mode?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${w.checked}`]:{transform:"translateX(20px)"},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${w.checked} + .${w.track}`]:{opacity:.5},[`&.${w.disabled} + .${w.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:""+("light"===e.palette.mode?.12:.2)},[`& .${w.input}`]:{left:"-100%",width:"300%"}})),(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,u.X4)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter((([,e])=>e.main&&e.light)).map((([t])=>({props:{color:t},style:{[`&.${w.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,u.X4)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${"light"===e.palette.mode?(0,u.a)(e.palette[t].main,.62):(0,u.e$)(e.palette[t].main,.55)}`}},[`&.${w.checked} + .${w.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}})))]}))),y=(0,s.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((({theme:e})=>({height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${"light"===e.palette.mode?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:""+("light"===e.palette.mode?.38:.3)}))),S=(0,s.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),C=n.forwardRef((function(e,t){const a=(0,m.b)({props:e,name:"MuiSwitch"}),{className:n,color:r="primary",edge:s=!1,size:u="medium",sx:p}=a,v=(0,o.A)(a,b),f=(0,l.A)({},a,{color:r,edge:s,size:u}),w=(e=>{const{classes:t,edge:a,size:i,color:n,checked:r,disabled:s}=e,o={root:["root",a&&`edge${(0,h.A)(a)}`,`size${(0,h.A)(i)}`],switchBase:["switchBase",`color${(0,h.A)(n)}`,r&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=(0,d.A)(o,g,t);return(0,l.A)({},t,c)})(f),C=(0,i.jsx)(S,{className:w.thumb,ownerState:f});return(0,i.jsxs)(x,{className:(0,c.A)(w.root,n),sx:p,ownerState:f,children:[(0,i.jsx)(k,(0,l.A)({type:"checkbox",icon:C,checkedIcon:C,ref:t,ownerState:f},v,{classes:(0,l.A)({},w,{root:w.switchBase})})),(0,i.jsx)(y,{className:w.track,ownerState:f})]})}));var A=function(){return A=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},A.apply(this,arguments)},j={inputProps:{"aria-label":"Switch demo"}},N=(0,s.Ay)(C)((function(){return{"& .MuiSwitch-switchBase.Mui-disabled":{color:"#C5C9D6"},"& .MuiSwitch-switchBase.Mui-disabled + .MuiSwitch-track":{backgroundColor:"#FFFFFF"},"& .MuiSwitch-switchBase.Mui-checked":{color:"#0C8EC7","&:hover":{backgroundColor:"rgba(20, 28, 76,0.1)"}}," & .MuiSwitch-switchBase":{color:"#141C4C","&:hover":{backgroundColor:"rgba(0, 133, 255, 0.1)"}},".MuiSwitch-track":{backgroundColor:"#141C4C"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#0C8EC7"}}}));const R=function(e){var t=e.ischecked,a=e.handleCheck,n=(e.defaultChecked,e.disabled),r=e.name;return(0,i.jsx)("div",{children:(0,i.jsx)(N,A({name:r,disabled:n,checked:t,onChange:a},j))})};var $=a(95093),B=a.n($),O=a(84976),z=a(50461),M=a(80771),F=a(20114),I=a(1315),D=a(59408),_=a(30157),P=a(56230),E=a(2896),T=function(){return T=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},T.apply(this,arguments)},X={pagination:!0,paginationPageSize:10,cacheBlockSize:10};const L=function(){var e=(0,E.d4)((function(e){return e.app_central_store})).clientPrivateKey,t=(0,n.useState)({}),a=t[0],s=t[1],o=[{headerName:"User ID",field:"id",width:100},{headerName:"Name",field:"name"},{headerName:"Email ID",field:"email"},{headerName:"Contact Number",field:"phone",width:150},{headerName:"Role",field:"role_id",width:100,cellRenderer:function(e){return f.map((function(t){return(null==t?void 0:t.id)===e.value?null==t?void 0:t.name:""}))}},{headerName:"User Status",field:"is_active",cellRenderer:function(e){var t;return(0,i.jsx)("div",T({className:""},{children:(0,i.jsx)(R,{name:"",ischecked:null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.is_active,handleCheck:function(t){y(t,e)}})}))},width:150,suppressMenu:!0,sortable:!1,filter:!1},{headerName:"Created On",field:"created_at",width:180,cellRenderer:function(e){return e.value?B()(null==e?void 0:e.value).format("h:mm A; DD/M/yy"):"--"}},{headerName:"Actions",field:"status",cellRenderer:function(e){var t,a;return(0,i.jsxs)("div",T({className:"flex mt-1 items-center gap-3"},{children:[(0,M.OQ)("users","is_update")?(0,i.jsx)(O.N_,T({to:"/admin/user-settings/users/edit/".concat((0,z.yv)(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.id))},{children:(0,i.jsx)("img",{src:"/assets/icons/userEditIcon.svg",alt:"edit"})})):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(O.N_,T({to:"/admin/user-settings/users/view/".concat((0,z.yv)(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.id))},{children:(0,i.jsx)("img",{src:"/assets/icons/viewIcon.svg",alt:"viewIcon"})}))]}))},width:100,suppressMenu:!0,sortable:!1,filter:!1}],l={search:"",role:"",status:""},c=(0,n.useState)(!1),d=c[0],u=c[1],h=(0,n.useState)(l),p=h[0],m=h[1],v=(0,n.useState)([]),f=v[0],g=v[1],w=(0,P.xC)(),b=(0,n.useState)({grid:void 0,column:void 0}),x=b[0],k=b[1],y=function(e,t){D.S.patch("users/".concat(t.data.id),{status:e.target.checked}).then((function(a){var i;(0,M.Sx)(null===(i=null==a?void 0:a.data)||void 0===i?void 0:i.message,"success");var n=t.node;n&&n.setDataValue("is_active",e.target.checked?0:1)})).catch((function(e){(0,M.Sx)(e.message,"error")})).finally((function(){}))};(0,n.useEffect)((function(){D.S.get("roles/dropdown").then((function(e){var t;g(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.data)})).catch((function(e){(0,M.Sx)(e.message,"error")}))}),[]);var S=function(e){var t=e.target,a=t.value,i=t.name,n=T({},p);n[i]=a,m(n)};(0,n.useEffect)((function(){x.grid&&C(p)}),[x.grid]);var C=function(t){var a={getRows:function(a){setTimeout((function(){x.grid.showLoadingOverlay(),x.grid.setRowData([])}),100);var i=a.endRow/X.paginationPageSize;D.S.get("users?search=".concat(null==t?void 0:t.search,"&page=").concat(i,"&role=").concat(null==t?void 0:t.role,"&status=").concat(null==t?void 0:t.status)).then((function(t){return i=void 0,n=void 0,o=function(){var i,n,r,o,l,c,d,u,h,p,m;return function(e,t){var a,i,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(l){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(s=0)),s;)try{if(a=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(v){switch(v.label){case 0:return i=t.data.data,[4,(0,z.ch)(t.data.x_key,e)];case 1:n=v.sent(),r=i.data,o=0,l=r,v.label=2;case 2:return o<l.length?(c=l[o],d=c,u="name",[4,(0,z.rX)(c.name,n)]):[3,6];case 3:return d[u]=v.sent(),h=c,p="phone",[4,(0,z.rX)(c.phone,n)];case 4:h[p]=v.sent(),v.label=5;case 5:return o++,[3,2];case 6:return a.successCallback(i.data,null===(m=i.pagination)||void 0===m?void 0:m.total),s(i.pagination),x.grid.setRowData([]),setTimeout((function(){(0,M.OQ)("users","is_update")?x.column.autoSizeAllColumns():x.column.sizeColumnsToFit(),x.grid.hideOverlay(),i.data.length||x.grid.showNoRowsOverlay()}),100),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(a,s)}l((o=o.apply(i,n||[])).next())}));var i,n,r,o})).catch((function(e){(0,M.Sx)(e.message,"error"),a.successCallback([],0)}))}};x.grid&&x.grid.setDatasource(a)};return(0,i.jsxs)("div",T({className:""},{children:[(0,i.jsxs)("div",T({className:"flex  justify-between flex-col sm:flex-row"},{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",T({className:"subheading"},{children:"List of Users"})),(0,i.jsx)("hr",{className:"w-32 md:w-full line"}),(0,i.jsxs)("p",T({className:"text-xs mt-1 font-normal"},{children:[null==a?void 0:a.total," Users"]}))]}),(0,i.jsxs)("div",T({className:"flex mt-4 h-9 lg:mt-0 gap-4"},{children:[(0,i.jsx)(F.A,{handleClick:function(){u(!d)},text:"Filter",icon:(0,i.jsx)("img",{src:"/assets/icons/filterIcon.svg",alt:""}),classes:"bg-none border border-black text-black w-fit px-4  py-2"}),(0,M.OQ)("users","is_write")?(0,i.jsx)(O.N_,T({to:"/admin/user-settings/users/create"},{children:(0,i.jsx)(F.A,{text:"Create New User",icon:(0,i.jsx)("img",{src:"/assets/icons/plusIcon.svg",alt:"plus"}),classes:"bg-darkshadeBlue text-white w-fit px-8  py-2"})})):(0,i.jsx)(i.Fragment,{})]}))]})),d?(0,i.jsxs)("div",T({className:"w-full flex flex-col lg:flex-row gap-4 items-center  mt-4  filters"},{children:[(0,i.jsx)("div",T({className:"w-full lg:w-2/12"},{children:(0,i.jsx)(I.A,{width:"100%",options:f||[],value:null==p?void 0:p.role,handleChange:S,label:"Role",name:"role"})})),(0,i.jsx)("div",T({className:"w-full lg:w-2/12"},{children:(0,i.jsx)(I.A,{width:"100%",options:[{id:!0,name:"ACTIVE"},{id:!1,name:"DISABLED"}],handleChange:S,value:null==p?void 0:p.status,label:"Status",name:"status"})})),(0,i.jsx)("div",T({className:"w-full lg:w-3/12"},{children:(0,i.jsx)(_.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,value:null==p?void 0:p.search,handleChange:S,label:"Search",name:"search"})})),(0,i.jsxs)("div",T({className:"w-full lg:w-3/12 flex pl-6 justify-end lg:justify-start items-center gap-2"},{children:[(0,i.jsx)(F.A,{disabled:(0,M.a8)(p)<1,handleClick:function(){C(p)},text:"Apply",classes:"bg-darkshadeBlue text-white w-fit px-4  py-2"}),(0,i.jsx)("button",T({disabled:!1,className:"w-fit px-2 py-1 border border-black cursor-pointer",onClick:function(){m(l),C(l)}},{children:(0,i.jsx)("img",{src:"/assets/icons/refreshIcon.svg",alt:""})}))]}))]})):null,(0,i.jsx)("div",T({className:"mt-6"},{children:(0,i.jsx)("div",T({className:"ag-theme-alpine",style:{height:"65vh",width:"100%"}},{children:(0,i.jsx)(r.W6,T({rowModelType:"infinite",columnDefs:o,onGridReady:function(e){k({grid:e.api,column:e.columnApi}),w&&!(0,M.OQ)("users","is_update")&&e.columnApi.setColumnsVisible(["is_active"],!1),e.columnApi.autoSizeAllColumns()},enableCellTextSelection:!0,ensureDomOrder:!0,onFirstDataRendered:function(){x.column&&x.column.autoSizeAllColumns()},gridOptions:{defaultColDef:{maxWidth:500}}},X))}))}))]}))}}}]);