"use strict";(self.webpackChunkscube_v4=self.webpackChunkscube_v4||[]).push([[581],{2581:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(74848),a=r(96540),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};const o=function(e){var t=e.employee,r=(e.refresh,[{title:"Employee ID",value:"".concat(null==t?void 0:t.emp_id)||"--"},{title:"Name",value:"".concat(null==t?void 0:t.name)||"--"},{title:"Email ID",value:"".concat(null==t?void 0:t.email)||"--"},{title:"Primary Number",value:"".concat(null==t?void 0:t.phone)||"--"},{title:"Department",value:"".concat(null==t?void 0:t.department)||"--"},{title:"Designation",value:"".concat(null==t?void 0:t.designation)||"--"},{title:"Card Status",value:"".concat(null==t?void 0:t.card_status)||"--"},{title:"Work Address",value:"".concat(null==t?void 0:t.work_location)||"--"}]);return(0,n.jsxs)("div",l({className:"bg-white p-3 lg:p-6"},{children:[(0,n.jsx)("div",l({className:"flex justify-between items-center"},{children:(0,n.jsx)("p",l({className:"text-lg font-bold"},{children:"Employee Information"}))})),(0,n.jsx)("div",l({className:" bg-lightshadedGray mt-4 p-4 min-h-[130px] max-h-full flex flex-col lg:grid lg:grid-cols-4 gap-10"},{children:null==r?void 0:r.map((function(e,t){var r;return(0,n.jsxs)("div",l({className:"flex justify-between lg:flex-col lg:justify-start gap-2"},{children:[(0,n.jsx)("p",l({className:"text-xs text-bluishGray"},{children:null==e?void 0:e.title})),(0,n.jsx)("p",l({className:"text-sm text-shadeDarkBlue break-words"},{children:null!==(r=null==e?void 0:e.value)&&void 0!==r?r:"--"}))]}),null==e?void 0:e.title)}))}))]}))};var i=r(2198),s=(r(50513),r(65048),r(20114)),c=r(59408),d=r(80771),u=r(29729),p=r.n(u),h=r(38611),f=r(69067),m=r(47419),x=function(){return x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},x.apply(this,arguments)},v=function(e){var t=e.placeholder,r=e.id,a=e.name,l=e.rows,o=e.className,i=e.value,s=e.error,c=e.handleChange,d=e.helperText,u=e.readOnly;return(0,n.jsxs)("div",x({className:"relative"},{children:[(0,n.jsx)("textarea",{readOnly:u,className:"font-redHatDisplayMedium w-full border border-border  ".concat(o||"bg-transparent"," rounded-xs  text-SpaceCadet p-4 placeholder-placeholder outline-none placeholder:text-Comet focus:border-[2px] focus:border-blue-600 hover:border-black ").concat(o,"  ").concat(s&&"placeholder:font-redHatDisplayRegular border-red-600 placeholder:text-red-600"),name:a,id:r,rows:l,value:i,onChange:c,placeholder:t}),d&&(0,n.jsx)("p",x({className:"absolute -bottom-3 ml-4 text-red-600 text-xs"},{children:d}))]}))};const b=v;v.defaultProps={placeholder:"",id:"",name:"",className:"",value:"",error:!1,handleChange:function(){},helperText:""};var g=r(1315),y=function(){return y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},j={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"#fcfcfc"};const w=function(e){var t=e.selectedItem,r=e.open,l=e.handleClose,o=e.refresh,i=(0,a.useState)(!1),u=i[0],x=i[1],v={status:"",remark:""},w=(0,a.useState)(v),C=w[0],k=w[1],N={status:"required"},S=(0,a.useState)(v),O=S[0],A=S[1],E=function(){k(v),A({}),l()},T=function(e){var t,r=e.target,n=r.name,a=r.value;k(y(y({},C),((t={})[n]=a,t))),A({})};return(0,n.jsx)("div",y({className:""},{children:(0,n.jsx)(h.A,y({open:r,onClose:E,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",disableEnforceFocus:!0,closeAfterTransition:!0,BackdropComponent:m.A,BackdropProps:{timeout:500}},{children:(0,n.jsx)(f.A,y({sx:j,style:{borderRadius:"8px",outline:"none"}},{children:(0,n.jsxs)("div",y({className:"lg:p-5 md:p-5 p-4 flex flex-col lg:w-[496px] md:w-[496px] w-[300px] m-auto"},{children:[(0,n.jsxs)("div",y({className:"flex lg:items-center justify-between"},{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",y({className:"text-lg font-onestMedium text-[#141C4C]"},{children:"Change the Status"})),(0,n.jsx)("p",y({className:"text-sm font-onestMedium text-[#141C4C]"},{children:"Update the change in status with remark"}))]}),(0,n.jsx)("div",y({onClick:l,className:"cursor-pointer"},{children:(0,n.jsx)("svg",y({width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:(0,n.jsx)("g",y({id:"Iconly/Light/Close Square"},{children:(0,n.jsxs)("g",y({id:"Close Square"},{children:[(0,n.jsx)("path",{id:"Stroke 1",d:"M14.3936 10.1211L9.60156 14.9131",stroke:"#141C4C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,n.jsx)("path",{id:"Stroke 2",d:"M14.3976 14.9181L9.60156 10.1211",stroke:"#141C4C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,n.jsx)("path",{id:"Stroke 3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.334 3.27734H7.665C4.644 3.27734 2.75 5.41634 2.75 8.44334V16.6113C2.75 19.6383 4.635 21.7773 7.665 21.7773H16.333C19.364 21.7773 21.25 19.6383 21.25 16.6113V8.44334C21.25 5.41634 19.364 3.27734 16.334 3.27734Z",stroke:"#141C4C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}))}))}))}))]})),(0,n.jsx)("div",y({className:"bg-[rgb(241,244,248)] rounded-lg p-5 mt-2"},{children:(0,n.jsxs)("div",y({className:"flex flex-col lg:gap-5 md:gap-5 gap-3"},{children:[(0,n.jsx)(g.A,{width:"100%",options:[{name:"ACTIVE"},{name:"DISABLED"}],handleChange:T,value:null==C?void 0:C.status,error:null==O?void 0:O.status,helperText:null==O?void 0:O.status,label:"Status",name:"status"}),(0,n.jsx)(b,{placeholder:"Add your remark for this status",name:"remark",rows:5,readOnly:!1,handleChange:T,value:null==C?void 0:C.remark,error:null==O?void 0:O.remark,helperText:null==O?void 0:O.remark})]}))})),(0,n.jsx)("div",y({className:" m-auto mt-5"},{children:(0,n.jsx)(s.A,{loading:u,handleClick:function(){var e=N;if("DISABLED"===C.status&&(e.remark="required|max:1000"),function(e,t){var r=new(p())(e,t);if(r.fails()){var n={};for(var a in r.errors.errors)n[a]=r.errors.errors[a][0];return A(n),!1}return A({}),!0}(C,e)){x(!0);var r={status:C.status,remark:C.remark};c.S.put("/employees/cards/".concat(t.id),r).then((function(e){(0,d.Sx)("STATUS UPDATED SUCCESSFULLY!.","success"),E(),o(),x(!1)})).catch((function(e){(0,d.Sx)(e.message,"error"),x(!1)}))}else{var n=Object.keys(O);if(null==n?void 0:n.length){var a=document.querySelector("input[name=".concat(n[0],"]"));a&&a.scrollIntoView({behavior:"smooth",block:"end",inline:"start"})}(0,d.Sx)("Please check form errors!","error")}},text:u?"Loading...":"Update Status",classes:"bg-darkBlue px-20 py-2 text-white"})}))]}))}))}))}))};var C=function(){return C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},C.apply(this,arguments)};const k=function(e){var t=e.id,r=(0,a.useState)(!1),l=r[0],o=r[1],u=(0,a.useState)([]),p=u[0],h=u[1],f=(0,a.useState)(""),m=f[0],x=f[1],v=(0,a.useState)(!1),b=v[0],g=v[1],y=[{field:"index",headerName:"Sn. No",width:100},{field:"card_uuid",width:300,headerName:"Card Id",cellRenderer:function(e){var t;if(e.data)return(null===(t=e.data)||void 0===t?void 0:t.card_uuid)||"-"}},{field:"status",headerName:"Status",cellRenderer:function(e){var t;if(e.data)return null===(t=e.data)||void 0===t?void 0:t.card_status}},{field:"action",headerName:"Action",width:250,cellRenderer:function(e){return e.data?"DISABLED"===e.data.card_status?(0,n.jsx)(n.Fragment,{children:"--"}):"DISPATCHED"===e.data.card_print_status?(0,n.jsx)("div",C({className:"flex h-full justify-between gap-4 items-center"},{children:(0,n.jsx)(s.A,{loading:l,handleClick:function(){return t=e.data,x(t),void g(!0);var t},text:"Update",classes:"bg-darkBlue px-20 py-2 text-white"})})):(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:"Card Not printed!."})}):null}},{field:"remark",headerName:"Remark",cellRenderer:function(e){var t;if(e.data)return(null===(t=e.data)||void 0===t?void 0:t.remark)||"--"}}],j=function(){o(!0),c.S.get("/employees/cards/".concat(t)).then((function(e){var t=e.data.data.map((function(e,t){return e.index=t+1,e}));h(t),o(!1)})).catch((function(e){o(!1),(0,d.Sx)(e.message,"error")})).finally((function(){o(!1)}))};return(0,a.useEffect)((function(){j()}),[]),(0,n.jsx)("div",C({className:""},{children:l?(0,n.jsx)("div",C({className:"h-full flex justify-center items-center"},{children:(0,n.jsx)("p",C({className:"px-4 py-2 shadow border text-sm"},{children:"Loading..."}))})):p.length>0?(0,n.jsxs)("div",C({className:"ag-theme-alpine"},{children:[(0,n.jsx)("div",C({className:"ag-theme-alpine",style:{height:"400px",width:"100%"}},{children:(0,n.jsx)(i.W6,C({columnDefs:y,rowData:p},{pagination:!0,paginationPageSize:20,cacheBlockSize:20},{onGridReady:function(e){(0,d.OQ)("employees","is_update")||e.columnApi.setColumnsVisible(["action"],!1),e.columnApi.sizeColumnsToFit()},overlayNoRowsTemplate:'<span class="ag-overlay-loading-center">Loading...</span>'}))})),(0,n.jsx)(w,{selectedItem:m,open:b,handleClose:function(){return g(!1)},refresh:j})]})):(0,n.jsx)("div",C({className:" flex items-center justify-center h-[40vh] w-full"},{children:(0,n.jsx)("p",{children:"No Cards Found !"})}))}))};var N=function(){return N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},N.apply(this,arguments)};const S=function(e){var t=e.id;return(0,n.jsxs)("div",N({className:"bg-white p-3 lg:p-6"},{children:[(0,n.jsx)("p",N({className:"text-lg font-bold"},{children:"Manage Cards"})),(0,n.jsx)("div",N({className:" bg-lightshadedGray mt-2 p-6"},{children:(0,n.jsx)(k,{id:t})}))]}))};var O=r(1124),A=r(5556),E=r.n(A),T=r(18878),D=r(10423),P=r(59665),M=function(){return M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},M.apply(this,arguments)},_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},B=(0,P.A)({tabs:{backgroundColor:"white","& .MuiTabs-indicator":{backgroundColor:"#0C8EC7"},"& .MuiTabs-flexContainer button":{width:"13rem !important"},"& .MuiTab-root.Mui-selected":{color:"#0C8EC7",fontFamily:"",fontWeight:"700"},"& .MuiButtonBase-root":{textTransform:"none"}}});function I(e){var t=e.children,r=e.value,a=e.index,l=_(e,["children","value","index"]);return(0,n.jsx)("div",M({role:"tabpanel",hidden:r!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},l,{children:r===a&&(0,n.jsx)(f.A,M({sx:{pt:"20px"}},{children:t}))}))}function R(e){var t=e.cols,r=e.data,l=a.useState(0),o=l[0],i=l[1],s=B();return(0,n.jsxs)(f.A,M({sx:{width:"100%"},className:"w-full h-full"},{children:[(0,n.jsx)(f.A,{children:(0,n.jsx)(T.A,M({value:o,onChange:function(e,t){i(t)},"aria-label":"basic tabs example",className:s.tabs,sx:{border:1,borderColor:"rgba(47, 72, 110, 0.1)",backgroundColor:"white !important","& .MuiTabs-indicator":{backgroundColor:"#0C8EC7"},"& .MuiTabs-flexContainer button":{width:"14rem !important",fontFamily:"Onest Regular !important"},"& .MuiTab-root.Mui-selected":{color:"#0C8EC7",fontFamily:"Onest Regular !important",fontWeight:"700"},"& .MuiButtonBase-root":{textTransform:"none"}}},{children:null==t?void 0:t.map((function(e,t){return(0,n.jsx)(D.A,M({sx:{color:"#141C4C",fontSize:"14px",marginRight:"".concat("20px"),lineHeight:"25px"},label:null==e?void 0:e.title},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),t)}))}))}),null==r?void 0:r.map((function(e,t){return(0,n.jsx)(I,M({value:o,index:t},{children:e}),t)}))]}))}I.propTypes={children:E().node,index:E().number.isRequired,value:E().number.isRequired};var L=r(50461),F=r(47767),q=r(2896),U=function(){return U=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},U.apply(this,arguments)},V=[{title:" Employee Information "},{title:" Manage Cards"}];const H=function(){var e=(0,F.g)().id,t=(0,a.useState)({}),r=t[0],l=t[1],i=(0,q.d4)((function(e){return e.app_central_store})).clientPrivateKey,s=(0,L.af)(e),u=function(){c.S.get("/employees/".concat(s)).then((function(e){return t=void 0,r=void 0,a=function(){var t,r,n,a,o,s,c,d,u,p,h,f,m,x,v,b,g,y,j;return function(e,t){var r,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(w){switch(w.label){case 0:return t=null===(j=null==e?void 0:e.data)||void 0===j?void 0:j.data,[4,(0,L.ch)(null==e?void 0:e.data.x_key,i)];case 1:return r=w.sent(),n=t,a="name",[4,(0,L.rX)(t.name,r)];case 2:return n[a]=w.sent(),o=t,s="designation",t.designation?[4,(0,L.rX)(t.designation,r)]:[3,4];case 3:return c=w.sent(),[3,5];case 4:c="--",w.label=5;case 5:return o[s]=c,d=t,u="department",t.department?[4,(0,L.rX)(t.department,r)]:[3,7];case 6:return p=w.sent(),[3,8];case 7:p="--",w.label=8;case 8:return d[u]=p,h=t,f="phone",t.phone?[4,(0,L.rX)(t.phone,r)]:[3,10];case 9:return m=w.sent(),[3,11];case 10:m="--",w.label=11;case 11:return h[f]=m,x=t,v="email",t.email?[4,(0,L.rX)(t.email,r)]:[3,13];case 12:return b=w.sent(),[3,14];case 13:b="--",w.label=14;case 14:return x[v]=b,g=t,y="emp_id",[4,(0,L.rX)(t.emp_id,r)];case 15:return g[y]=w.sent(),l(t),[2]}}))},new((n=void 0)||(n=Promise))((function(e,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function i(e){try{s(a.throw(e))}catch(e){l(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,i)}s((a=a.apply(t,r||[])).next())}));var t,r,n,a})).catch((function(e){(0,d.Sx)(e.message,"error")}))};return(0,a.useEffect)((function(){u()}),[]),(0,n.jsxs)("div",U({className:""},{children:[(0,n.jsx)(O.A,{links:[{path:"List Of Employees",url:"/admin/employees"},{path:"View Employee",url:""}]}),(0,n.jsx)("p",U({className:"text-xl font-extrabold text-shadeDarkBlue font-onestRegular"},{children:"View Employee"})),(0,n.jsx)("br",{}),(0,n.jsx)("div",U({className:""},{children:(0,n.jsx)(R,{cols:V,data:[(0,n.jsx)(o,{refresh:u,employee:r},1),(0,n.jsx)(S,{id:s},2)]})}))]}))}}}]);