"use strict";(self.webpackChunkscube_v4=self.webpackChunkscube_v4||[]).push([[473],{25473:(e,n,a)=>{a.d(n,{A:()=>y});var t=a(74848),r=a(96540),l=a(89856),o=a(20114),i=a(30157),s=a(77064),d=a(18197),c=a(35642),u=a(59408),p=a(80771),m=a(47767),h=a(84976),v=a(50461),f=a(2896),g=function(){return g=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},g.apply(this,arguments)},x=function(e,n,a,t){return new(a||(a=Promise))((function(r,l){function o(e){try{s(t.next(e))}catch(e){l(e)}}function i(e){try{s(t.throw(e))}catch(e){l(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,i)}s((t=t.apply(e,n||[])).next())}))},b=function(e,n){var a,t,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(a=1,t&&(r=2&i[0]?t.return:i[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,i[1])).done)return r;switch(t=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],t=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const y=function(e){var n=e.id,a=(0,f.d4)((function(e){return e.app_central_store})),y=a.serverPublicKey,j=a.clientPrivateKey,w=(0,m.Zp)(),_={emp_id:"",name:"",email:"",phone:"",department:"",designation:"",work_location:"",image_base64:"",blood_group:""},N=(0,r.useState)(_),k=N[0],O=N[1],D=(0,r.useState)(_),S=D[0],F=D[1],T=(0,r.useState)(!1),A=T[0],C=T[1],I=function(e){var n;if(e.url){var a=e.url;O(g(g({},k),{image_base64:a}))}else{var t=e.target,r=t.name,l=t.value;O(g(g({},k),((n={})[r]=l,n))),F(_)}};return(0,r.useEffect)((function(){n&&function(e){u.S.get("/employees/".concat(e)).then((function(e){return x(void 0,void 0,void 0,(function(){var n,a,t,r,l,o,i,s,d,c,u,p,m,h,f,x,y;return b(this,(function(b){switch(b.label){case 0:return n=null===(y=null==e?void 0:e.data)||void 0===y?void 0:y.data,[4,(0,v.ch)(null==e?void 0:e.data.x_key,j)];case 1:return a=b.sent(),t=n,r="name",[4,(0,v.rX)(n.name,a)];case 2:return t[r]=b.sent(),l=n,o="designation",[4,(0,v.rX)(n.designation,a)];case 3:return l[o]=b.sent(),i=n,s="department",[4,(0,v.rX)(n.department,a)];case 4:return i[s]=b.sent(),d=n,c="phone",[4,(0,v.rX)(n.phone,a)];case 5:return d[c]=b.sent(),u=n,p="email",[4,(0,v.rX)(n.email,a)];case 6:return u[p]=b.sent(),m=n,h="emp_id",[4,(0,v.rX)(n.emp_id,a)];case 7:return m[h]=b.sent(),n.blood_group?(f=n,x="blood_group",[4,(0,v.rX)(n.blood_group,a)]):[3,9];case 8:f[x]=b.sent(),b.label=9;case 9:return O(g(g({},k),n)),[2]}}))}))})).catch((function(e){(0,p.Sx)(e.message,"error")}))}(n)}),[n]),(0,t.jsxs)("div",g({className:""},{children:[(0,t.jsxs)("div",g({className:"w-full bg-white p-6"},{children:[(0,t.jsx)(l.A,{heading:"Employee Details"}),(0,t.jsxs)("div",g({className:"grid grid-cols-2 gap-6 py-10"},{children:[(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,value:null==k?void 0:k.emp_id,error:!!(null==S?void 0:S.emp_id),helperText:null==S?void 0:S.emp_id,handleChange:I,label:"Employee ID",name:"emp_id"}),(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==S?void 0:S.name),helperText:null==S?void 0:S.name,value:null==k?void 0:k.name,handleChange:I,label:"Employee Name",name:"name"}),(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==S?void 0:S.email),helperText:null==S?void 0:S.email,value:null==k?void 0:k.email,handleChange:I,label:"Email ID",name:"email"}),(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==S?void 0:S.phone),helperText:null==S?void 0:S.phone,value:null==k?void 0:k.phone,handleChange:I,label:"Phone Number",name:"phone"}),(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==S?void 0:S.department),helperText:null==S?void 0:S.department,value:null==k?void 0:k.department,handleChange:I,label:"Department",name:"department"}),(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==S?void 0:S.designation),helperText:null==S?void 0:S.designation,value:null==k?void 0:k.designation,handleChange:I,label:"Designation",name:"designation"}),(0,t.jsx)(c.A,{imageUrl:null==k?void 0:k.image_base64,styleType:"lg",setImage:I,acceptMimeTypes:["image/jpeg","image/png"],title:"Upload or Drag and Drop image",label:"File Format: .jpeg/ .png",id:"image_base64",maxSize:1,removeImage:function(){!function(){var e;O(g(g({},k),((e={}).image_base64="",e)))}()},filename:"image_base64",error:null==S?void 0:S.image_base64})," ",(0,t.jsx)(d.A,{rows:8,error:!!(null==S?void 0:S.work_location),helperText:null==S?void 0:S.work_location,placeholder:"Work Location",value:null==k?void 0:k.work_location,handleChange:I,name:"work_location"}),(0,t.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,value:null==k?void 0:k.blood_group,error:!!(null==S?void 0:S.blood_group),helperText:null==S?void 0:S.blood_group,handleChange:I,label:"Blood Group",name:"blood_group"})]}))]})),(0,p.OQ)("employees","is_write")||(0,p.OQ)("employees","is_update")?(0,t.jsxs)("div",g({className:"w-full flex justify-end items-center gap-4 pt-6"},{children:[(0,t.jsx)(h.N_,g({to:"/admin/employees"},{children:(0,t.jsx)(o.A,{text:"Cancel",classes:"bg-none border text-black border-black w-fit px-4   py-2"})})),(0,t.jsx)(o.A,{loading:A,handleClick:function(){return x(void 0,void 0,void 0,(function(){var e,a,t,r,l,o,i,d,c,m,h,f,j,_,N,D;return b(this,(function(T){switch(T.label){case 0:for(e=["name","department","designation","emp_id"],a=!1,t=g({},S),r=0,l=e;r<l.length;r++)o=l[r],i=/^[a-zA-Z0-9\s\.&(),-]+$/,k[o]&&!i.test(k[o])&&(t[o]="Invalid "+o,a=!0);return k.phone&&!(0,p.Q7)(k.phone)&&(t.phone="Please Enter Valid No",a=!0),d=/\S+@\S+\.\S+/,k.email&&!d.test(k.email)&&(t.email="Invalid Email",a=!0),c=/^[a-zA-Z0-9\s\-.,#]+$/,k.work_location&&!c.test(k.work_location)&&(t.work_location="Invalid Work Location",a=!0),m=/^(A|B|AB|O)[+-]?$/,k.blood_group&&!m.test(k.blood_group)&&(t.blood_group="Invalid Blood Group",a=!0),a?(F(t),[2]):"object"==typeof(h=(0,s.M)(k,{emp_id:"required|max:20",name:"string|required|max:150",email:"string|max:100|email",phone:"string|max:13",department:"string|max:100",designation:"string|max:100",work_location:"string|max:2000"}))?(F(h),[2]):(C(!0),f=n?"/employees/".concat(n):"employees",j=g({},k),[4,(0,v.cd)()]);case 1:return _=T.sent(),[4,(0,v.ei)(_,y)];case 2:return N=T.sent(),D=["name","designation","department","phone","email","emp_id","blood_group"].map((function(e){return x(void 0,void 0,void 0,(function(){var n,a;return b(this,(function(t){switch(t.label){case 0:return j[e]?(n=j,a=e,[4,(0,v.yd)(j[e],_)]):[3,2];case 1:n[a]=t.sent(),t.label=2;case 2:return[2]}}))}))})),[4,Promise.all(D)];case 3:return T.sent(),(n?u.S.put(f,j,{headers:{"Encrypted-Key":N}}):u.S.post(f,j,{headers:{"Encrypted-Key":N}})).then((function(n){var a;O(e),(0,p.Sx)(null===(a=null==n?void 0:n.data)||void 0===a?void 0:a.message,"success"),w("/admin/employees")})).catch((function(e){(0,p.Sx)(null==e?void 0:e.message,"error")})).finally((function(){C(!1)})),[2]}}))}))},text:"Submit Details",classes:"bg-darkshadeBlue text-white w-fit px-20   py-2"})]})):(0,t.jsx)(t.Fragment,{})]}))}},35642:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(74848),r=a(96540),l=a(55446),o=function(){return o=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},o.apply(this,arguments)};const i=function(e){var n=e.id,a=e.label,i=e.acceptMimeTypes,s=void 0===i?["application/x-zip-compressed","application/zip","application/x-rar-compressed","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]:i,d=e.setImage,c=e.title,u=void 0===c?"Drag and Drop PDF here":c,p=e.maxSize,m=void 0===p?5:p,h=e.imageUrl,v=void 0===h?"":h,f=e.styleType,g=void 0===f?"lg":f,x=e.filename,b=e.previewData,y=void 0===b?"":b,j=(e.name,e.setPreviewMeta),w=e.removeImage,_=e.error,N=e.type,k=void 0===N?"image":N,O=(0,r.useState)(!1),D=O[0],S=O[1],F=(0,r.useState)(!1),T=F[0],A=F[1],C=(0,r.useState)({name:"",url:"",type:""}),I=C[0],P=C[1],E={FileDefault:"/assets/images/FileDefault.svg",FileUploadIcon:"/assets/images/FileUploadIcon.svg",FileUploaded:"/assets/images/FileUploaded.svg",xls:"/assets/images/xls.svg"};(0,r.useEffect)((function(){(null==v?void 0:v.startsWith("data:"))&&(P({name:"userImage",url:v,type:"image/png"}),S(!0)),y&&(P(y),S(!0)),v||y||(P({name:"",url:"",type:""}),S(!1))}),[y,v]);var U=function(e){var n=function(e){var n=Number(m)*Math.pow(1024,2);return(null==e?void 0:e.size)>n?(l.oR.error("File Size Exceeds the ".concat(m," MB"),{position:l.oR.POSITION.TOP_RIGHT}),!1):!!s.includes(e.type)||(l.oR.error("Unsupported file selected!",{position:l.oR.POSITION.TOP_RIGHT}),!1)}(e);if(n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){var n={name:e.name,url:a.result,type:e.type};P(n),j&&j(n),S(!0),A(!0),d({url:a.result||"",name:x,file:e,preview:n})}}},B=function(e){if(e.preventDefault(),e.stopPropagation(),"dragover"===e.type&&A(!0),"dragleave"===e.type&&A(!1),"drop"===e.type){var n=e.dataTransfer.files[0];U(n)}};return(0,t.jsxs)("div",o({className:"relative file-upload-box w-full h-fit ".concat(_&&"file-upload-error"," ").concat(T?"file-upload-active":"")},{children:[D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",o({className:"flex justify-center flex-col items-center ".concat("md"===g?"hidden":"block")},{children:[(0,t.jsx)("img",{src:null==E?void 0:E.FileUploaded,alt:""}),(0,t.jsx)("p",o({className:"text-shadeDarkBlue text-center pt-4 font-bold"},{children:"Uploaded!"}))]})),(0,t.jsxs)("div",o({className:"flex justify-between items-center ".concat("md"===g?"pt-0":"pt-6")},{children:[(0,t.jsxs)("div",o({className:"flex justify-center items-center space-x-6"},{children:[(0,t.jsx)("img",{src:I.url,alt:"",className:"w-[50px] h-[50px]",onError:function(e){e.target.src=null==E?void 0:E.FileUploaded}}),(0,t.jsx)("p",o({className:"text-shadeDarkBlue text-sm"},{children:I.name.length>10?(0,t.jsxs)(t.Fragment,{children:[I.name.substring(0,10),"..."]}):(0,t.jsx)(t.Fragment,{children:I.name})}))]})),(0,t.jsx)("div",{children:(0,t.jsx)("button",o({onClick:function(){S(!1),A(!1),w&&w("")},type:"button",className:"cancel-btn flex cursor-pointer justify-center items-center rounded-lg"},{children:"Remove"}))})]}))]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("label",o({htmlFor:n,className:"cursor-pointer ".concat("md"===g?"hidden":"block"),onDragOver:function(e){return B(e)},onDragLeave:function(e){B(e)},onDrop:function(e){B(e)}},{children:[(0,t.jsx)("img",{src:"image"===k?null==E?void 0:E.FileDefault:E.xls,className:"mx-auto",alt:""}),(0,t.jsx)("p",o({className:"text-center font-bold text-shadeDarkBlue text-lg pt-2"},{children:u}))]})),(0,t.jsx)("div",{children:(0,t.jsxs)("div",o({className:"flex justify-between items-center ".concat("md"===g?"pt-0":"pt-6")},{children:[(0,t.jsxs)("div",o({className:"flex justify-center items-center space-x-0 lg:space-x-6"},{children:[(0,t.jsx)("div",o({className:"hidden lg:block"},{children:(0,t.jsx)("img",{src:null==E?void 0:E.FileUploadIcon,alt:"",className:"w-[25px] h-[24px]"})})),(0,t.jsxs)("div",o({className:"text-Kimberly flex flex-col text-sm label-sec"},{children:[(0,t.jsx)("p",{children:a}),(0,t.jsxs)("p",o({className:"pt-2"},{children:["Maximum Size: ",m," Mb"]}))]}))]})),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",id:n,onChange:function(e){e.preventDefault();var n=e.target.files[0];U(n)},accept:s.toString(),className:"hidden"}),(0,t.jsx)("div",o({className:"upload-btn flex cursor-pointer justify-center items-center rounded-lg",id:n,onClick:function(e){return function(e){e.preventDefault();var a=document.getElementById(n);a&&a.click()}(e)}},{children:(0,t.jsx)("p",{children:"Choose File"})}))]})]}))})]}),_&&(0,t.jsx)("p",o({className:"absolute -bottom-6 ml-3 text-red-600 text-xs"},{children:_}))]}))}},89856:(e,n,a)=>{a.d(n,{A:()=>l});var t=a(74848),r=function(){return r=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},r.apply(this,arguments)};const l=function(e){var n=e.heading;return(0,t.jsx)("div",r({className:"w-full bg-lightshadedGray p-3 text-black font-bold text-lg"},{children:n}))}},18197:(e,n,a)=>{a.d(n,{A:()=>o});var t=a(74848),r=function(){return r=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},r.apply(this,arguments)},l=function(e){var n=e.placeholder,a=e.id,l=e.name,o=e.rows,i=e.className,s=e.value,d=e.error,c=e.handleChange,u=e.helperText,p=e.readOnly;return(0,t.jsxs)("div",r({className:"relative"},{children:[(0,t.jsx)("textarea",{readOnly:p,className:"font-redHatDisplayMedium w-full border border-border  ".concat(i||"bg-transparent"," rounded-xs  text-SpaceCadet p-4 placeholder-placeholder outline-none placeholder:text-Comet focus:border-[2px] focus:border-blue-600 hover:border-black ").concat(i,"  ").concat(d&&"placeholder:font-redHatDisplayRegular border-red-600 placeholder:text-red-600"),name:l,id:a,rows:o,value:s,onChange:c,placeholder:n}),u&&(0,t.jsx)("p",r({className:"absolute -bottom-3 ml-4 text-red-600 text-xs"},{children:u}))]}))};const o=l;l.defaultProps={placeholder:"",id:"",name:"",className:"",value:"",error:!1,handleChange:function(){},helperText:""}},77064:(e,n,a)=>{a.d(n,{M:()=>r});var t=a(29729),r=function(e,n,a){void 0===a&&(a={});var r=new t(e,n,a);if(r.fails()){var l={};for(var o in r.errors.errors)l[o]=r.errors.errors[o][0];return l}return!0}}}]);