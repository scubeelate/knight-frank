"use strict";(self.webpackChunkscube_v4=self.webpackChunkscube_v4||[]).push([[473],{25473:(e,a,n)=>{n.d(a,{A:()=>b});var l=n(74848),t=n(96540),r=n(89856),o=n(20114),i=n(30157),s=n(77064),d=n(18197),c=n(35642),u=n(59408),p=n(80771),m=n(47767),h=n(84976),v=n(2896),f=function(){return f=Object.assign||function(e){for(var a,n=1,l=arguments.length;n<l;n++)for(var t in a=arguments[n])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},f.apply(this,arguments)},x=function(e,a,n,l){return new(n||(n=Promise))((function(t,r){function o(e){try{s(l.next(e))}catch(e){r(e)}}function i(e){try{s(l.throw(e))}catch(e){r(e)}}function s(e){var a;e.done?t(e.value):(a=e.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,i)}s((l=l.apply(e,a||[])).next())}))},g=function(e,a){var n,l,t,r,o={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,i[0]&&(o=0)),o;)try{if(n=1,l&&(t=2&i[0]?l.return:i[0]?l.throw||((t=l.return)&&t.call(l),0):l.next)&&!(t=t.call(l,i[1])).done)return t;switch(l=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,l=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((t=(t=o.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){o.label=i[1];break}if(6===i[0]&&o.label<t[1]){o.label=t[1],t=i;break}if(t&&o.label<t[2]){o.label=t[2],o.ops.push(i);break}t[2]&&o.ops.pop(),o.trys.pop();continue}i=a.call(e,o)}catch(e){i=[6,e],l=0}finally{n=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const b=function(e){var a=e.id,n=(0,v.d4)((function(e){return e.app_central_store})),b=(n.serverPublicKey,n.clientPrivateKey,(0,m.Zp)()),y={emp_id:"",name:"",email:"",phone:"",department:"",designation:"",work_location:"",image_base64:"",blood_group:""},j=(0,t.useState)(y),w=j[0],_=j[1],N=(0,t.useState)(y),k=N[0],O=N[1],D=(0,t.useState)(!1),S=D[0],F=D[1],T=function(e){var a;if(e.url){var n=e.url;_(f(f({},w),{image_base64:n}))}else{var l=e.target,t=l.name,r=l.value;_(f(f({},w),((a={})[t]=r,a))),O(y)}};return(0,t.useEffect)((function(){a&&function(e){u.S.get("/employees/".concat(e)).then((function(e){return x(void 0,void 0,void 0,(function(){var a,n;return g(this,(function(l){return a=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.data,_(f(f({},w),a)),[2]}))}))})).catch((function(e){(0,p.Sx)(e.message,"error")}))}(a)}),[a]),(0,l.jsxs)("div",f({className:""},{children:[(0,l.jsxs)("div",f({className:"w-full bg-white p-6"},{children:[(0,l.jsx)(r.A,{heading:"Employee Details"}),(0,l.jsxs)("div",f({className:"grid grid-cols-2 gap-6 py-10"},{children:[(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,value:null==w?void 0:w.emp_id,error:!!(null==k?void 0:k.emp_id),helperText:null==k?void 0:k.emp_id,handleChange:T,label:"Employee ID",name:"emp_id"}),(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==k?void 0:k.name),helperText:null==k?void 0:k.name,value:null==w?void 0:w.name,handleChange:T,label:"Employee Name",name:"name"}),(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==k?void 0:k.email),helperText:null==k?void 0:k.email,value:null==w?void 0:w.email,handleChange:T,label:"Email ID",name:"email"}),(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==k?void 0:k.phone),helperText:null==k?void 0:k.phone,value:null==w?void 0:w.phone,handleChange:T,label:"Phone Number",name:"phone"}),(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==k?void 0:k.department),helperText:null==k?void 0:k.department,value:null==w?void 0:w.department,handleChange:T,label:"Department",name:"department"}),(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,error:!!(null==k?void 0:k.designation),helperText:null==k?void 0:k.designation,value:null==w?void 0:w.designation,handleChange:T,label:"Designation",name:"designation"}),(0,l.jsx)(c.A,{imageUrl:null==w?void 0:w.image_base64,styleType:"lg",setImage:T,acceptMimeTypes:["image/jpeg","image/png"],title:"Upload or Drag and Drop image",label:"File Format: .jpeg/ .png",id:"image_base64",maxSize:1,removeImage:function(){!function(e){var a;_(f(f({},w),((a={}).image_base64="",a)))}()},filename:"image_base64",error:null==k?void 0:k.image_base64})," ",(0,l.jsx)(d.A,{rows:8,error:!!(null==k?void 0:k.work_location),helperText:null==k?void 0:k.work_location,placeholder:"Work Location",value:null==w?void 0:w.work_location,handleChange:T,name:"work_location"}),(0,l.jsx)(i.A,{rows:1,width:"w-full",disabled:!1,readOnly:!1,value:null==w?void 0:w.blood_group,error:!!(null==k?void 0:k.blood_group),helperText:null==k?void 0:k.blood_group,handleChange:T,label:"Blood Group",name:"blood_group"})]}))]})),(0,p.OQ)("employees","is_write")||(0,p.OQ)("employees","is_update")?(0,l.jsxs)("div",f({className:"w-full flex justify-end items-center gap-4 pt-6"},{children:[(0,l.jsx)(h.N_,f({to:"/admin/employees"},{children:(0,l.jsx)(o.A,{text:"Cancel",classes:"bg-none border text-black border-black w-fit px-4   py-2"})})),(0,l.jsx)(o.A,{loading:S,handleClick:function(){return x(void 0,void 0,void 0,(function(){var e,n,l,t,r,o,i,d,c,m,h,v,x;return g(this,(function(g){for(e=["name","department","designation","emp_id"],n=!1,l=f({},k),t=0,r=e;t<r.length;t++)i=/^[a-zA-Z0-9\s\.&(),-]+$/,w[o=r[t]]&&!i.test(w[o])&&(l[o]="Invalid "+o,n=!0);return w.phone&&!(0,p.Q7)(w.phone)&&(l.phone="Please Enter Valid No",n=!0),d=/\S+@\S+\.\S+/,w.email&&!d.test(w.email)&&(l.email="Invalid Email",n=!0),c=/^[a-zA-Z0-9\s\-.,#]+$/,w.work_location&&!c.test(w.work_location)&&(l.work_location="Invalid Work Location",n=!0),m=/^(A|B|AB|O)[+-]?$/,w.blood_group&&!m.test(w.blood_group)&&(l.blood_group="Invalid Blood Group",n=!0),n?(O(l),[2]):"object"==typeof(h=(0,s.M)(w,{emp_id:"required|max:20",name:"string|required|max:150",email:"string|max:100|email",phone:"string|max:13",department:"string|max:100",designation:"string|max:100",work_location:"string|max:2000"}))?(O(h),[2]):(F(!0),v=a?"/employees/".concat(a):"employees",x=f({},w),(a?u.S.put(v,x):u.S.post(v,x)).then((function(a){var n;_(e),(0,p.Sx)(null===(n=null==a?void 0:a.data)||void 0===n?void 0:n.message,"success"),b("/admin/employees")})).catch((function(e){(0,p.Sx)(null==e?void 0:e.message,"error")})).finally((function(){F(!1)})),[2])}))}))},text:"Submit Details",classes:"bg-darkshadeBlue text-white w-fit px-20   py-2"})]})):(0,l.jsx)(l.Fragment,{})]}))}},35642:(e,a,n)=>{n.d(a,{A:()=>i});var l=n(74848),t=n(96540),r=n(55446),o=function(){return o=Object.assign||function(e){for(var a,n=1,l=arguments.length;n<l;n++)for(var t in a=arguments[n])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},o.apply(this,arguments)};const i=function(e){var a=e.id,n=e.label,i=e.acceptMimeTypes,s=void 0===i?["application/x-zip-compressed","application/zip","application/x-rar-compressed","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]:i,d=e.setImage,c=e.title,u=void 0===c?"Drag and Drop PDF here":c,p=e.maxSize,m=void 0===p?5:p,h=e.imageUrl,v=void 0===h?"":h,f=e.styleType,x=void 0===f?"lg":f,g=e.filename,b=e.previewData,y=void 0===b?"":b,j=(e.name,e.setPreviewMeta),w=e.removeImage,_=e.error,N=e.type,k=void 0===N?"image":N,O=(0,t.useState)(!1),D=O[0],S=O[1],F=(0,t.useState)(!1),T=F[0],A=F[1],C=(0,t.useState)({name:"",url:"",type:""}),I=C[0],P=C[1],U={FileDefault:"/assets/images/FileDefault.svg",FileUploadIcon:"/assets/images/FileUploadIcon.svg",FileUploaded:"/assets/images/FileUploaded.svg",xls:"/assets/images/xls.svg"};(0,t.useEffect)((function(){(null==v?void 0:v.startsWith("data:"))&&(P({name:"userImage",url:v,type:"image/png"}),S(!0)),y&&(P(y),S(!0)),v||y||(P({name:"",url:"",type:""}),S(!1))}),[y,v]);var E=function(e){var a=function(e){var a=Number(m)*Math.pow(1024,2);return(null==e?void 0:e.size)>a?(r.oR.error("File Size Exceeds the ".concat(m," MB"),{position:r.oR.POSITION.TOP_RIGHT}),!1):!!s.includes(e.type)||(r.oR.error("Unsupported file selected!",{position:r.oR.POSITION.TOP_RIGHT}),!1)}(e);if(a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var a={name:e.name,url:n.result,type:e.type};P(a),j&&j(a),S(!0),A(!0),d({url:n.result||"",name:g,file:e,preview:a})}}},B=function(e){if(e.preventDefault(),e.stopPropagation(),"dragover"===e.type&&A(!0),"dragleave"===e.type&&A(!1),"drop"===e.type){var a=e.dataTransfer.files[0];E(a)}};return(0,l.jsxs)("div",o({className:"relative file-upload-box w-full h-fit ".concat(_&&"file-upload-error"," ").concat(T?"file-upload-active":"")},{children:[D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",o({className:"flex justify-center flex-col items-center ".concat("md"===x?"hidden":"block")},{children:[(0,l.jsx)("img",{src:null==U?void 0:U.FileUploaded,alt:""}),(0,l.jsx)("p",o({className:"text-shadeDarkBlue text-center pt-4 font-bold"},{children:"Uploaded!"}))]})),(0,l.jsxs)("div",o({className:"flex justify-between items-center ".concat("md"===x?"pt-0":"pt-6")},{children:[(0,l.jsxs)("div",o({className:"flex justify-center items-center space-x-6"},{children:[(0,l.jsx)("img",{src:I.url,alt:"",className:"w-[50px] h-[50px]",onError:function(e){e.target.src=null==U?void 0:U.FileUploaded}}),(0,l.jsx)("p",o({className:"text-shadeDarkBlue text-sm"},{children:I.name.length>10?(0,l.jsxs)(l.Fragment,{children:[I.name.substring(0,10),"..."]}):(0,l.jsx)(l.Fragment,{children:I.name})}))]})),(0,l.jsx)("div",{children:(0,l.jsx)("button",o({onClick:function(){S(!1),A(!1),w&&w("")},type:"button",className:"cancel-btn flex cursor-pointer justify-center items-center rounded-lg"},{children:"Remove"}))})]}))]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",o({htmlFor:a,className:"cursor-pointer ".concat("md"===x?"hidden":"block"),onDragOver:function(e){return B(e)},onDragLeave:function(e){B(e)},onDrop:function(e){B(e)}},{children:[(0,l.jsx)("img",{src:"image"===k?null==U?void 0:U.FileDefault:U.xls,className:"mx-auto",alt:""}),(0,l.jsx)("p",o({className:"text-center font-bold text-shadeDarkBlue text-lg pt-2"},{children:u}))]})),(0,l.jsx)("div",{children:(0,l.jsxs)("div",o({className:"flex justify-between items-center ".concat("md"===x?"pt-0":"pt-6")},{children:[(0,l.jsxs)("div",o({className:"flex justify-center items-center space-x-0 lg:space-x-6"},{children:[(0,l.jsx)("div",o({className:"hidden lg:block"},{children:(0,l.jsx)("img",{src:null==U?void 0:U.FileUploadIcon,alt:"",className:"w-[25px] h-[24px]"})})),(0,l.jsxs)("div",o({className:"text-Kimberly flex flex-col text-sm label-sec"},{children:[(0,l.jsx)("p",{children:n}),(0,l.jsxs)("p",o({className:"pt-2"},{children:["Maximum Size: ",m," Mb"]}))]}))]})),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",id:a,onChange:function(e){e.preventDefault();var a=e.target.files[0];E(a)},accept:s.toString(),className:"hidden"}),(0,l.jsx)("div",o({className:"upload-btn flex cursor-pointer justify-center items-center rounded-lg",id:a,onClick:function(e){return function(e){e.preventDefault();var n=document.getElementById(a);n&&n.click()}(e)}},{children:(0,l.jsx)("p",{children:"Choose File"})}))]})]}))})]}),_&&(0,l.jsx)("p",o({className:"absolute -bottom-6 ml-3 text-red-600 text-xs"},{children:_}))]}))}},89856:(e,a,n)=>{n.d(a,{A:()=>r});var l=n(74848),t=function(){return t=Object.assign||function(e){for(var a,n=1,l=arguments.length;n<l;n++)for(var t in a=arguments[n])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},t.apply(this,arguments)};const r=function(e){var a=e.heading;return(0,l.jsx)("div",t({className:"w-full bg-lightshadedGray p-3 text-black font-bold text-lg"},{children:a}))}},18197:(e,a,n)=>{n.d(a,{A:()=>o});var l=n(74848),t=function(){return t=Object.assign||function(e){for(var a,n=1,l=arguments.length;n<l;n++)for(var t in a=arguments[n])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},t.apply(this,arguments)},r=function(e){var a=e.placeholder,n=e.id,r=e.name,o=e.rows,i=e.className,s=e.value,d=e.error,c=e.handleChange,u=e.helperText,p=e.readOnly;return(0,l.jsxs)("div",t({className:"relative"},{children:[(0,l.jsx)("textarea",{readOnly:p,className:"font-redHatDisplayMedium w-full border border-border  ".concat(i||"bg-transparent"," rounded-xs  text-SpaceCadet p-4 placeholder-placeholder outline-none placeholder:text-Comet focus:border-[2px] focus:border-blue-600 hover:border-black ").concat(i,"  ").concat(d&&"placeholder:font-redHatDisplayRegular border-red-600 placeholder:text-red-600"),name:r,id:n,rows:o,value:s,onChange:c,placeholder:a}),u&&(0,l.jsx)("p",t({className:"absolute -bottom-3 ml-4 text-red-600 text-xs"},{children:u}))]}))};const o=r;r.defaultProps={placeholder:"",id:"",name:"",className:"",value:"",error:!1,handleChange:function(){},helperText:""}},77064:(e,a,n)=>{n.d(a,{M:()=>t});var l=n(29729),t=function(e,a,n){void 0===n&&(n={});var t=new l(e,a,n);if(t.fails()){var r={};for(var o in t.errors.errors)r[o]=t.errors.errors[o][0];return r}return!0}}}]);